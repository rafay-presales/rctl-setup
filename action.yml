# action.yml
name: 'Rafay CLI Setup'
description: 'Downloads and configures Rafacy rctl CLI'
inputs:
  rafay-api-key:
    description: 'Rafay API Key'
    required: true
  rafay-api-secret:
    description: 'Rafay API Secret'
    required: true
  rafay-endpoint:
    description: 'Rafay Console Endpoint'
    required: true
    default: 'console.rafay.dev'
  rafay-project:
    description: 'Rafay Project'
    required: true
    default: 'defaultproject'
runs:
  using: "composite"
  steps:
    - name: Run setup script file
      env:
        RCTL_REST_ENDPOINT: ${{ inputs.rafay-endpoint }}
        RCTL_API_KEY: ${{ inputs.rafay-api-key }}
        RCTL_API_SECRET: ${{ inputs.rafay-api-secret }}
        RCTL_PROJECT: ${{ inputs.rafay-project }}
      run: |
         chmod +x ./rctl_setup.sh
         ./rctl_setup.sh
      shell: bash
